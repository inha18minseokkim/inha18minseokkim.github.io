---
layout: default
---
<section class="hero">
  <div class="container">
    <p class="hero-greeting">안녕하세요,</p>
    <h1 class="hero-title">minseokkim<span class="dot">.</span></h1>
    <p class="hero-desc">개발하면서 공부하고 경험한 것들을 정리하는 공간입니다.</p>
  </div>
</section>

<section class="posts-section">
  <div class="container">
    <h2 class="section-title">전체 글</h2>

    {% if site.posts.size > 0 %}

    <!-- 태그 필터 -->
    <div class="tag-filter">
      <button class="tag-filter-btn active" data-tag="all">전체</button>
      {% for tag in site.tags %}
      <button class="tag-filter-btn" data-tag="{{ tag[0] }}" data-count="{{ tag[1] | size }}">{{ tag[0] }}</button>
      {% endfor %}
    </div>

    <p class="filter-status" id="filterStatus"></p>

    <ul class="post-list">
      {% for post in site.posts %}
      <li class="post-item" data-tags="{{ post.tags | join: ',' }}">
        <a href="{{ post.url | relative_url }}" class="post-link">
          <div class="post-meta">
            <time class="post-date">{{ post.date | date: "%Y. %m. %d" }}</time>
            {% if post.tags %}
            <div class="post-tags">
              {% for tag in post.tags %}
              <span class="tag">{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
          <h2 class="post-title">{{ post.title }}</h2>
          <p class="post-excerpt">{{ post.excerpt | strip_html | truncate: 160 }}</p>
        </a>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <div class="empty-state">
      <p>아직 작성된 글이 없습니다.</p>
    </div>
    {% endif %}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 태그 버튼을 언급 횟수 내림차순으로 정렬
  const tagFilter = document.querySelector('.tag-filter');
  const tagBtns = Array.from(tagFilter.querySelectorAll('.tag-filter-btn[data-count]'));
  tagBtns.sort((a, b) => parseInt(b.dataset.count) - parseInt(a.dataset.count));
  tagBtns.forEach(btn => tagFilter.appendChild(btn));

  const filterBtns = document.querySelectorAll('.tag-filter-btn');
  const allBtn = document.querySelector('.tag-filter-btn[data-tag="all"]');
  const postItems = document.querySelectorAll('.post-item');
  const filterStatus = document.getElementById('filterStatus');

  let selectedTags = new Set();

  function applyFilter() {
    let visibleCount = 0;

    postItems.forEach(item => {
      const tags = item.dataset.tags ? item.dataset.tags.split(',') : [];
      const visible = selectedTags.size === 0 || tags.some(t => selectedTags.has(t));
      item.style.display = visible ? '' : 'none';
      if (visible) visibleCount++;
    });

    if (selectedTags.size === 0) {
      allBtn.classList.add('active');
      filterStatus.textContent = '';
    } else {
      allBtn.classList.remove('active');
      filterStatus.textContent = `${[...selectedTags].map(t => '"' + t + '"').join(', ')} 태그: ${visibleCount}개의 글`;
    }
  }

  allBtn.addEventListener('click', function() {
    selectedTags.clear();
    filterBtns.forEach(b => b.classList.remove('active'));
    applyFilter();
  });

  filterBtns.forEach(btn => {
    if (btn.dataset.tag === 'all') return;
    btn.addEventListener('click', function() {
      const tag = this.dataset.tag;
      if (selectedTags.has(tag)) {
        selectedTags.delete(tag);
        this.classList.remove('active');
      } else {
        selectedTags.add(tag);
        this.classList.add('active');
      }
      applyFilter();
    });
  });
});
</script>
