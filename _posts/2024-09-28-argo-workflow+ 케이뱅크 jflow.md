---
title: "argo-workflow+ 케이뱅크 jflow"
date: 2024-09-28
tags: [미지정]
category: 실무경험
---

### 문제상황


현재 케이뱅크 MSA 구조에서 argo-workflow를 사용하는데, 아르고의 기능중 절반도 사용하지 못하는 중이다. 사유는 다음과 같다.
1. 보안성심의 체크리스트 - 작업기록을 체계적으로 보존하고 있는가? 일단 jflow가 트리거가 아닌 작업은 모두 위반으로 봄
2. 관제 불가 - jflow에서 트리거를 날리지 않는 이상 원격지에서 오더가 불가능하다. 출근해야함.
3. 영업일 테이블 판별 불가 - 이건 그래도 마이너한데, 그냥 매일 작업을 띄우고 영업일 판단해도 될것같음, 또는 파이썬이나 busybox 이미지 하나 말아서 영업일 테이블 찌르는 식으로 step 구성해도 될것같음 ㅇㅇ
그래서 현재는 CronWorkflow는 사실상 사용하지 못하고 있다. 원격지에서 조치가 필요없는것(그냥 주기성 후처리 작업, 심각도 낮은) 정도 사용할 수 있다

argo-workflow가 2024년 현재 내수용 레퍼런스가 많이 없어서 직접 작성 함
회사에서 현재 argo-workflow.yaml 파일을 스테이징에 업데이트 하기 위해서는 gitlab-ci 파이프라인을 통해 업데이트 해야하는데 상당히 귀찮기 때문에(자바 이미지는 바뀐게 아닌데 yaml 파일의 속성만 바꾸는 경우, 그리고 이미지 빌드하는데 너무오래걸림..자원이슈) su 권한을 받아야 하는데 su 권한 안줌
그래서 맥미니에다가 argo 시리즈 올린다

[맥미니용 샘플 배포(20240928)]({% post_url 2024-09-28-맥미니용 샘플 배포(20240928) %})
[MSA workflow에 cronjob을 올리려면…(20240928)]({% post_url 2024-09-28-MSA workflow에 cronjob을 올리려면…(20240928) %})
[v3.6 cron stop.strategy (20240928)]({% post_url 2024-09-28-v3.6 cron stop.strategy (20240928) %})
[여러 번 실행(recursive)]({% post_url 2024-09-28-여러 번 실행(recursive) %})
[1파일 n 잡]({% post_url 2024-09-29-1파일 n 잡 %})
[실패해도 계속 실행 잡]({% post_url 2024-10-01-실패해도 계속 실행 잡 %})
[실패해도 계속 실행 잡 2(개선버전)]({% post_url 2024-10-02-실패해도 계속 실행 잡 2(개선버전) %})
[1차 완성본]({% post_url 2024-10-20-1차 완성본 %})
[샤딩 활용 N Parallel workflow > Aggregate]({% post_url 2025-12-22-샤딩 활용 N Parallel workflow  Aggregate %})