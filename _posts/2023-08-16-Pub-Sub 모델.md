---
title: "Pub-Sub 모델"
date: 2023-08-16
tags: [미지정]
---

```java
package com.example.test;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import java.util.ArrayList;
import java.util.List;
interface Publisher<T>{
    void subscribe(Subscriber<? super T> subscriber);
}
interface Subscriber<T>{
    void onNext(T t);
}
class SimpleCell implements Publisher<Integer>,Subscriber<Integer> {
    private int value = 0;
    private String name;
    private List<Subscriber> subscribers = new ArrayList<>();
    public SimpleCell(String name){
        this.name = name;
    }
    private void notifyAllSubscribers(){
        subscribers.forEach(subscriber -> subscriber.onNext(this.value));
    }
    @Override
    public void subscribe(Subscriber<? super Integer> subscriber) {
        subscribers.add(subscriber);
    }

    @Override
    public void onNext(Integer integer) {
        this.value = integer;
        System.out.println(this.name + " : " + this.value);
        notifyAllSubscribers();
    }
}

@SpringBootApplication
public class TestApplication {
    private final static Logger log = LoggerFactory.getLogger(TestApplication.class);


    public static void main(String[] args) {
        SpringApplication.run(TestApplication.class, args);
        SimpleCell c3 = new SimpleCell("C3");
        SimpleCell c2 = new SimpleCell("C2");
        SimpleCell c1 = new SimpleCell("C1");
        c1.subscribe(c3);
        c2.subscribe(c3);
        c1.onNext(10);
        c2.onNext(20);

    }

}
```


### Publisher


### Subscriber

onSubscribe : 구독을 수행하는 메서드이다. 이 부분에서는 구독을 수행할 지, 수행하지 않을 지를 판단하는 메서드이다.
onNext : 일련의 스트림을 처리하는 부분이다.
onError : 일련의 스트림을 처리하다가 예외 혹은 에러가 나타났을 때 처리하는 부분이다.
onComplete : 모든 스트림을 처리했을 때, 수행되는 메서드이다.
[Java.lang.Concurrent.Flow]({% post_url 2023-08-17-Java.lang.Concurrent.Flow %})