---
title: "아키텍쳐협의회 회의록(20241219)"
date: 2025-01-28
tags:
  - 기획
  - 개발
category:
  - 실무경험
---
스크럼/회의 내용 및 요건 정리.
# 내가 발의 한 안건


## 배경

1. 현재 행 내 폐쇄망 환경에서 공중망 api로 데이터를 수집하는것은 이제 케이뱅크 업무의 일부이고 앞으로 계속 추가될 예정이다.
2. 그러므로 앞으로 데이터를 수집할 때 openApi(행내 업무시스템 중 일부)를 EAI를 통해서 호출하는 빈도가 많아진다.
3. 하지만 현재 EAI는 1메가바이트가 넘는 경우 java heap oom이 나면서 뻗는다
4. 1메가가 넘지 않는다 하더라도 특정 시간대에 트래픽이 몰리면 EAI가 뻗을 수 있음
  1. 최근 FEP 밀림 > EAI 내부 큐가 쌓임 > 전체적으로 업무 순단 한번씩 발생했었음
  2. EAI가 전행 내부 버스용으로 사용되고 모노구조이다 보니 뻗으면 오픈뱅킹, 송금 이런 대외연동건 다 안됨. 카드결제(카드계<>계정계) 같은 내부 서비스 연동되는것도 안됨
  3. 이제 여기서 N개의 신규 업무가 EAI로 들어가면 더 자주 발생할 것
5. 카프카가 대안이긴 했다(EAI와 별개로 운용되고, 1메가 넘어도 힙메모리와 옵션 조절하면 받아줌, 데이터 수집이 촌각을 다툴정도로 실시간성을 요하진 않기 때문에 괜찮)
  1. 하지만 sub 해서 Api 호출에 대한 제어권이 없기 때문에 실패한 호출, DLT에 대한 관리가 잘 안된다.
  2. 주기적으로 단건 수집은 사용할 수 있지만, 좀 더 정교한 로직이 필요할 때는 사용할 수 없다(페이징되어있는 데이터 수집, 조건에 따라서 달라지는 수집 등등)

![](attachment:08b8282b-cc33-4c20-8f59-220d9c8d99f0:image.png)


## 제안

1. OpenAPI 서버에 직접 http로 찌르게 해주세요
2. 그게 안된다면 EAI 서버에 SCG를 힙메모리 빵빵하게 해서 띄워주세요


### 결과

1. OpenAPI가 더이상 업무시스템격이 아니라 인터페이스의 역할을 하도록 아키텍쳐를 수정하면 OpenAPI에 직접 찌를 수 있음(EAI,FEP를 직접 호출할 수 있는것과 같음). 그렇게 장기적으로 검토
2. 만약 그게 안된다면 EAI에서 프록시를 띄워서 라우팅만 해줌
3. 당장 시작해야하는 프로젝트들은 어떡하지..
