---
title: "Cache Invalidate 주기 및 기준정보 누락 처리"
date: 2025-09-08
tags:
  - 주식서비스
  - 개발
  - 캐싱
  - 이슈정리
category:
  - 실무경험
  - 주식둘러보기
---

관심 종목 화면에서 기준정보가 없는 종목(상장폐지 등)의 처리 방식과 Cache Invalidate 동작 검증 내용.

---

## 정상 케이스

![이미지](/assets/images/Pasted%20image%2020260227174049.png)

정상 데이터가 존재하는 종목(NVDA)의 경우, 당일 가격(167.02달러)이 정상적으로 조회된다.

---

## 기준정보 누락 케이스 — 가격 없음, 종목명 노출

![이미지](/assets/images/Pasted%20image%2020260227174053.png)

상장폐지 등의 사유로 가격 데이터가 없는 종목의 경우, 가격은 노출하지 않고 종목명만 노출하는 방식으로 처리한다. 고객이 관심 종목으로 등록해 둔 경우 종목명은 유지해야 하기 때문이다.

![이미지](/assets/images/Pasted%20image%2020260227174056.png)

내 관심 종목 화면에서도 동일하게 가격 미노출 + 종목명 노출 동작을 확인했다.

---

## Cache Invalidate 테스트

![이미지](/assets/images/Pasted%20image%2020260227174115.png)

9월 5일자 NVDA 가격 데이터를 의도적으로 삭제한 뒤, Cache Invalidate 주기가 도래할 때까지 대기하여 캐시 갱신이 정상적으로 이루어지는지 확인했다.

- mediation 레이어 및 해외주식 서비스 모두 정상 동작 확인.

---

## 채널 측 추가 요구사항 및 이슈

![이미지](/assets/images/Pasted%20image%2020260227174122.png)

테스트 과정에서 아래 세 가지 이슈를 확인했다.

**1. 채널 캐시 미갱신 문제**

가격 데이터가 null로 내려갔음에도 채널(고객 디바이스)에 기존 캐시값(171.66달러)이 그대로 노출되는 현상이 발생했다. 원인을 확인한 결과, mediation 파드에서 캐시 갱신이 제때 이루어지지 않은 것으로 파악됐다. 가격이 null로 내려오는 경우 채널 측 캐시도 함께 무효화하는 처리가 필요하다.

**2. 항목 선택 시 캐시 제거**

가격 누락 종목의 카드 엘리먼트를 탭했을 때 해당 캐시값이 제거되도록 처리해야 한다.

**3. 상세 화면 진입 차단**

가격 정보가 없는 종목은 상세 화면으로 진입할 수 없도록 막는 로직이 필요하다. 현재는 4XX 에러가 내려오는 상태로, 사용자 경험 측면에서 개선이 필요하다.

![이미지](/assets/images/Pasted%20image%2020260227174126.png)
