---
title: 내부상품대분류관련
date: 2023-06-07
tags:
  - 생활시세
  - 기획
  - 케이뱅크
category: 실무경험
---
특정 상품(600,615,04,01,01 : 수입명태) 의 피드가 끝나고 (600,615,04,01,20 : 수입명태) 로 새로 데이터가 피드 되는 경우(운영리스크) 어떻게 할 것인가

### 데이터를 이어붙이는 경우

현재 테이블 환경에서는 두 가지 해결방법이 있음.
1. 소스코드단에서 예외를 적용하여 두 데이터를 동일하게 취급
  - 소스코드단을 건드리기는 쉽지않다.
2. SQL에 맵핑
  - 기존 통계 테이블에 있던 (600,615,04,01,01)을 (600,615,04,01,20)으로 모두 매핑해야 연속적인 데이터 피드로 보일것. 통계테이블 데이터가 백만건단위라 쉽지않을듯
3. 내부상품소분류코드를 중간에 끼워넣음(추상화)
  - 내부상품분류테이블에서 자체적으로 회사 코드를 사용하는것으로 바꿈, (600,615,04,01,01 → 0001) 로 일대일매핑을 하고, 통계테이블,사용자 테이블 등 행 내 시스템에서는 0001로 명태를 식별하다가 데이터 피드가 종료되면 (600,615,04,01,20 → 0001)으로 통계테이블에서 바꾸는걸로.
  - 기존)TB_FDP_DTP_LSAR_PRICE_M(600,615,04,01,01) → TB_FDP_DTP_LSAR_PRICE_S(600,615,04,01,01)
  - TOBE)TB_FDP_DTP_LSAR_PRICE_M(600,615,04,01,01) → TB_FDP_DTP_LSAR_PRICE_S(0001)
  - 문제점: 중간에 테이블 하나를 더 거침. 현재 개발중인 프로세스 변경 필요. 

## 새로 피드를 하는 경우

그냥 고객 관심상품에서 disable 시키고 새로운 상품을 만들어서 피드하면 됨. 개발측면에서도 간단하고 운영하는 BM입장에서도 간단하지만(운영리스크 없음) UX측면에서 긍정적일까..
