---
title: "Redis 싱글스레드 + Multiplexing"
date: 2025-01-10
tags: [Redis, 백엔드, 아키텍처]
---

Redis는 싱글스레드로 동작한다.

싱글스레드로 동작하기 때문에 빠른 접근 + Race condition 가능성이 없다.

그럼 다중 요청은 어떻게 처리할까?

## 이벤트 루프 기반의 논블로킹 I/O

이벤트 루프 기반 논블로킹 방식으로 다중 요청을 병렬처럼 처리한다.

1. 클라이언트 소켓에서 요청을 이벤트 큐에 등록
2. 싱글 스레드 메인 루프가 이 요청들을 하나씩 빠르게 처리
3. 각 명령어는 매우 빠르게 완료되므로 수천~수만 RPS도 처리 가능

Redis의 각 명령어는 O(1) 또는 O(n)으로 매우 빠르게 끝나기 때문에, 싱글 스레드임에도 다음 요청이 대기하는 시간이 매우 짧다. Multiplexing(다중화)으로 여러 클라이언트의 소켓을 하나의 스레드가 감시하면서 처리하는 구조다.

## I/O 멀티스레딩

Redis 6.0부터 명령어 파싱, 응답 송신 등의 **네트워크 I/O를 멀티 스레드로 처리**할 수 있게 됐다.

단, 실제 명령어 실행(데이터 읽기/쓰기)은 여전히 싱글 스레드다. I/O 처리만 병렬화한 것이기 때문에 Race condition 없이 원자적인 명령어 실행 보장은 유지된다.

---

**핵심 정리**

| 구분 | 스레딩 방식 |
|---|---|
| 명령어 실행 | 싱글 스레드 |
| 네트워크 I/O (Redis 6.0+) | 멀티 스레드 가능 |
| 다중 클라이언트 처리 | 이벤트 루프 + Multiplexing |
