---
title: "공모주 청약 계산기 알고리즘 뻘짓"
date: 2023-07-01
tags: [삽질, 주식, 공모주, 알고리즘]
---

## 관련 포스팅

- [공모주 최소청약단위 크롤링 (균등배정 case)](/2023/07/02/ipo-min-subscription-unit-crawling/)
- [공모주 증거금율 크롤링](/2023/07/03/ipo-margin-rate-crawling/)
- [연합인포맥스 - 금감원 데이터 문제](/2023/07/04/ipo-yonhap-infomax-data-issue/)
- [99.99% 검증완료 + 로직 개선](/2023/07/05/ipo-99-percent-verification/)

---

공모주 청약 계산기에서 "얼마 넣으면 몇 주 받을 수 있나"를 계산하는 로직을 구현하면서 정리한 내용.

## 예시: 마이크로투나노

- 희망공모가액: 13,500 ~ 15,500원
- 코스닥 시장, 액면가 500원
- 기관경쟁률: 1716.98:1
- **확정공모가: 15,500원** (희망공모가 상단)
- 상장공모 정보: 신주모집 1,000,000주, 100%
- 배정방식: 기관 70~75만주, 개인 25~30만주 → **일반공모물량 25만주 확정** (균등 물량 12.5만주)
- 청약가능주수: 30~24,000주
- 청약증거금률: 50%

한국투자 비례 경쟁률 기준: 1276:1

---

## 균등배정: "최소배정물량 신청하면 1주라도 건질 수 있다"

균등배정 참여 조건:

```
15,500 × 30 / 2 (증거금비율 50%) = 232,500원
```

232,500원 넣으면 균등배정 참여 가능.

균등 물량 N주를 균등하게 나눠주는데, 균등배정 주수를 계산하려면 다음 정보가 필요하다:

1. 확정공모가
2. 최소청약단위
3. 균등배정주식수 (통상적으로 일반공모주식수의 최소 25%는 개인청약으로...)
4. 현재 청약 신청한 계좌 수

최소 청약 단위는 각 증권사별로 다른 전문(電文)으로 가져와야 해서 통합이 어렵다.

---

## 비례배정: 얼마를 넣어야 1주 받나

경쟁률 1276:1, 공모가 15,500원, 증거금률 50% 기준:

```
15,500 × 1,276 / 2 = 9,889,000원 → 약 989만원 넣어야 비례배정 1주
```

경쟁률 1000:1이라면:

```
청약총액 / 배정총액 = 1000
15,500 × 1,000 = 15,500,000원 → 2주 배정 가능 (청약금액 775만원)
```

따라서 775만원 이상 넣을 것 아니면 비례배정보다 균등배정에 집중하는 게 낫다.

---

## UI에 넣을 수 있는 툴팁

- "N원 이상 넣으면 균등배정으로 최소 1주 받을 수 있어요"
- "비례배정 1주를 받으려면 약 N만원이 필요해요. 그 이하라면 균등배정만 참여하세요"

이 두 가지 정보를 UI에 노출하면 유저 입장에서 청약 전략을 세우기 쉬워진다.
