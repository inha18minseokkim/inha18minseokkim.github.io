---
title: 신혼여행가서 메이플 일퀘하는데 연결이 안됨
date: 2025-01-18
tags:
  - 네트워크
  - 뻘짓
  - 메이플
---

![이미지](/assets/images/Pasted%20image%2020260223142511.png)

발리에서 메이플 일퀘랑 주간보스를 하려고 했는데 잘 안됨.

인도네시아 > 한국 메이플스토리 서버로 실제로 라우팅되는데 어떤 홉구간이 존재하는지 보기 위해서 traceroute를 사용해봄

```shell
traceroute maplestory.nexon.com
traceroute: Warning: maplestory.nexon.com has multiple addresses; using 220.95.221.49
traceroute to maplestory.g.nexon.com (220.95.221.49), 64 hops max, 40 byte packets
 1  10.121.4.5 (10.121.4.5)  18.805 ms  19.400 ms  27.152 ms
 2  61.252.43.129 (61.252.43.129)  137.140 ms  119.735 ms  120.230 ms
 3  10.20.152.93 (10.20.152.93)  141.666 ms  142.527 ms  126.655 ms
 4  10.50.156.241 (10.50.156.241)  117.331 ms  128.095 ms  134.039 ms
 5  10.50.156.62 (10.50.156.62)  121.898 ms
    10.50.156.58 (10.50.156.58)  125.688 ms
    10.50.156.66 (10.50.156.66)  123.129 ms
 6  10.50.158.27 (10.50.158.27)  120.496 ms  152.223 ms  124.874 ms
 7  * 172.25.234.129 (172.25.234.129)  159.930 ms
    172.25.234.1 (172.25.234.1)  120.948 ms
 8  110.69.17.21 (110.69.17.21)  129.751 ms
    110.69.33.17 (110.69.33.17)  126.027 ms *
 9  110.69.35.10 (110.69.35.10)  152.303 ms  117.128 ms
    110.69.35.14 (110.69.35.14)  119.110 ms
10  59.18.61.129 (59.18.61.129)  120.158 ms
    59.18.60.129 (59.18.60.129)  133.987 ms
    59.18.61.141 (59.18.61.141)  124.003 ms
11  * * *
12  * * *
13  * 112.191.125.9 (112.191.125.9)  125.773 ms  122.739 ms
14  112.188.248.99 (112.188.248.99)  145.932 ms * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
31  * * *
32  * * *
33  * * *
34  * * *
35  * * *
36  * * *
37  * * *
38  * * *

```


실제 사이트로 접속은 되는데 느릴뿐, 되는건 맞는데 traceroute 로그로 봤을 때는 아예 안됨.

### 원인

traceroute는 ICMP 프로토콜을 사용해서 라우팅 대상 경로를 추적하지만 요즘은 ICMP를 안받아주는곳이 많아서 그렇다고 함. 디도스 때문인듯. TCP 프로토콜로 traceroute를 지원하기도 한다고 하니 써봄


### 실험 - tcptraceroute

기본적으로 구글은 전세계 상대로 서비스 하니깐 리전마다 다 물리적으로 접근하기 용이할 것 같아서 구글 접속 기록을 봄

```shell
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.google.com
Selected device en0, address 10.89.190.158, port 54769 for outgoing packets
Tracing the path to www.google.com (216.239.38.120) on TCP port 80 (http), 30 hops max
 1  10.89.0.1  6.215 ms  8.309 ms  13.686 ms
 2  125.160.9.254  19.346 ms  7.285 ms  14.027 ms
 3  180.252.3.197  14.702 ms  8.792 ms  37.602 ms
 4  74.125.48.2  40.583 ms  39.283 ms  61.668 ms
 5  74.125.48.2  149.355 ms  39.734 ms  33.172 ms
 6  192.178.109.207  54.309 ms  57.988 ms  52.775 ms
 7  142.251.240.255  46.688 ms  54.812 ms *
 8  any-in-2678.1e100.net (216.239.38.120) [open]  376.735 ms  61.301 ms  59.967 ms
 
```



### 네이버 접속 - 공항 wifi VS 로밍


공항 와이파이 vpn없이 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Selected device en0, address 10.89.190.158, port 54779 for outgoing packets
Tracing the path to www.naver.com (23.32.244.185) on TCP port 80 (http), 30 hops max
 1  10.89.0.1  16.412 ms  24.187 ms  49.587 ms
 2  125.160.9.254  21.304 ms  13.870 ms  6.899 ms
 3  180.252.3.197  32.908 ms  37.704 ms  47.772 ms
 4  125.160.9.15  55.963 ms  44.261 ms  21.509 ms
 5  a23-32-244-185.deploy.static.akamaitechnologies.com (23.32.244.185) [open]  39.175 ms  48.001 ms  57.835 ms
```

핫스팟 vpn없이 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Selected device en0, address 10.121.4.120, port 56516 for outgoing packets
Tracing the path to www.naver.com (223.130.200.219) on TCP port 80 (http), 30 hops max
 1  10.121.4.5  7.786 ms  6.876 ms  17.212 ms
 2  61.252.43.129  112.707 ms  114.661 ms  116.149 ms
 3  10.20.152.93  111.221 ms  115.394 ms  121.744 ms
 4  10.50.146.241  116.776 ms  131.814 ms  122.824 ms
 5  10.50.146.62  122.930 ms  135.095 ms  129.588 ms
 6  10.50.158.27  115.472 ms  115.374 ms  128.938 ms
 7  172.25.234.1  125.675 ms  146.355 ms  135.783 ms
 8  110.69.17.1  133.045 ms  113.712 ms  127.657 ms
 9  110.69.19.18  132.798 ms  126.644 ms  124.389 ms
10  * * *
11  218.145.42.66  202.591 ms  129.620 ms  120.875 ms
12  * * *
13  * * *
14  * * *
15  223.130.200.219 [open]  131.672 ms  120.347 ms  133.402 ms
```

결론 - ISP(인터넷 서비스 공급자) 마다 네트워크 망이 다르다보니 거치는 구간도 다를 수 있음. 네이버는 동남아에서도 서비스 하니깐 상대적으로 품질이 좋은듯 함.


### 메이플 접속 - 공항 wifi VS 로밍

공항와이파이 vpn없이 메이플

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Selected device en0, address 10.89.190.158, port 56625 for outgoing packets
Tracing the path to maplestory.g.nexon.com (220.95.221.49) on TCP port 80 (http), 30 hops max
 1  10.89.0.1  823.092 ms  347.735 ms  151.290 ms
 2  125.160.9.254  527.517 ms  274.399 ms  85.852 ms
 3  180.252.3.197  51.149 ms  27.403 ms  15.447 ms
 4  * * 180.240.190.101 374.530 ms
 5  180.240.190.101  40.892 ms * 134.804 ms
 6  180.240.204.8  118.108 ms  514.863 ms  300.525 ms
 7  be4126.ccr81.sin01.atlas.cogentco.com (154.18.3.249)  599.098 ms  46.807 ms  66.323 ms
 8  be9040.ccr41.lax04.atlas.cogentco.com (154.54.87.145)  288.987 ms  673.607 ms  244.369 ms
 9  be3360.ccr42.lax01.atlas.cogentco.com (154.54.25.149)  289.734 ms  900.870 ms  765.499 ms
10  be5992.ccr82.sjc13.atlas.cogentco.com (154.54.169.1)  1984.579 ms  1756.319 ms  1209.716 ms
11  be5991.ccr22.sfo01.atlas.cogentco.com (154.54.168.254)  1619.019 ms  2919.171 ms  2297.305 ms
12  be2430.ccr31.sjc04.atlas.cogentco.com (154.54.88.186)  645.907 ms  413.106 ms  495.158 ms
13  144.223.171.98  270.006 ms  398.055 ms  235.943 ms
14  * 112.174.87.53 820.253 ms  925.502 ms
15  112.174.91.121  497.783 ms  372.500 ms  479.549 ms
16  * * *
17  * * *
18  112.191.125.5  392.586 ms  601.536 ms  376.925 ms
19  112.188.248.105  363.281 ms  447.944 ms  406.187 ms
20  211.39.146.222  416.298 ms  376.036 ms  706.847 ms
21  * * *
22  * * *
23  * * *
24  220.95.221.49 [open]  383.112 ms  416.788 ms *
```


핫스팟 vpn없이 메이플, 메이플g

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Selected device en0, address 10.121.4.120, port 54891 for outgoing packets
Tracing the path to maplestory.g.nexon.com (220.95.221.49) on TCP port 80 (http), 30 hops max
 1  10.121.4.5  9.221 ms  6.844 ms  4.907 ms
 2  61.252.43.129  123.840 ms  135.989 ms  115.499 ms
 3  10.20.152.93  122.070 ms  119.845 ms  114.668 ms
 4  10.50.158.241  123.883 ms  118.748 ms  117.320 ms
 5  10.50.158.58  150.143 ms  125.205 ms  114.330 ms
 6  10.50.158.27  123.875 ms  115.942 ms  141.034 ms
 7  172.25.234.1  130.680 ms  126.676 ms  125.981 ms
 8  110.69.17.69  131.283 ms  131.049 ms  118.798 ms
 9  110.69.19.22  125.400 ms  132.027 ms  121.205 ms
10  59.18.60.149  141.863 ms  115.470 ms  159.633 ms
11  * * *
12  * * *
13  112.191.125.67  128.850 ms  138.348 ms  122.436 ms
14  112.188.248.97  139.165 ms  126.978 ms  135.042 ms
15  211.39.146.222  135.411 ms  127.183 ms  137.160 ms
16  * * *
17  * * *
18  * * *
19  220.95.221.49 [open]  120.695 ms  127.571 ms *

```


```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.nexon.com
Selected device en0, address 10.121.4.120, port 54888 for outgoing packets
Tracing the path to maplestory.nexon.com (220.95.221.49) on TCP port 80 (http), 30 hops max
 1  10.121.4.5  9.941 ms  13.392 ms  7.046 ms
 2  61.252.43.129  112.534 ms  116.660 ms  122.012 ms
 3  10.20.152.93  137.861 ms  128.003 ms  125.403 ms
 4  10.50.158.241  126.993 ms  117.476 ms  128.305 ms
 5  10.50.158.62  125.400 ms  120.440 ms  121.141 ms
 6  10.50.158.27  135.721 ms  140.960 ms  124.330 ms
 7  172.25.234.129  119.635 ms  124.876 ms  160.379 ms
 8  110.69.33.73  128.191 ms  125.936 ms  116.848 ms
 9  110.69.35.26  132.094 ms  116.596 ms  130.760 ms
10  59.18.61.149  127.530 ms * 118.135 ms
11  * * *
12  * * *
13  112.191.125.89  118.133 ms  118.651 ms  130.912 ms
14  112.188.248.123  138.950 ms  162.931 ms  127.290 ms
15  211.39.146.226  167.204 ms  138.959 ms  125.171 ms
16  * * *
17  * * *
18  * * *
19  220.95.221.49 [open]  128.179 ms * 114.924 ms
```

웹사이트 접속시 [maplestory.nexon.com](http://maplestory.nexon.com) 이고 게임 접속시는 maplestory.g.nexon.com인데 둘 다 물리적인 장소는 같은 것 같아서(trace 결과가 동일 또는 비슷) 그냥 앞으로는 하나만 갖고 할 예정  
결과만 봤을 때는 품질이 확실히 네이버보다 좋진않음(구간도 많고 핑도 네이버보다 길다)
게임을 했을 때


### VPN 사용 후 접속


### VPN을 사용한 이유?

인도네시아 ISP의 네트워크 망에서는 한국으로 접속이 상대적으로 쉽지않음. 위와 같이 인도네시아 네트워크에서는 한국 서버로의 라우팅이 쉽지않으면 한국 - 인도네시아 연결이 용이한 VPN으로 붙으면 어느정도 경로 최적화가 되지 않을까? 라는 생각


핫스팟 vpn 사용후 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Selected device ipsec0, address 10.12.1.5, port 56109 for outgoing packets
Tracing the path to www.naver.com (184.28.245.14) on TCP port 80 (http), 30 hops max
 1  173.244.42.157  192.384 ms  240.240 ms  208.501 ms
 2  vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  195.080 ms
    vl4.sg-eqxsg3-evpn-gw20.globalsecurelayer.com (206.148.27.208)  198.159 ms
    vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  219.662 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  187.178 ms  272.894 ms  347.393 ms
 4  unknown.globalsecurelayer.com (160.202.164.21)  250.322 ms  222.816 ms  231.679 ms
 5  ae1.r01.sin01.icn.netarch.akamai.com (23.56.138.34)  213.758 ms  192.281 ms  200.320 ms
 6  * * *
 7  ae8.r01.osa01.icn.netarch.akamai.com (23.215.54.158)  267.571 ms  274.801 ms  261.241 ms
 8  ae1.r02.osa01.ien.netarch.akamai.com (23.56.130.37)  261.669 ms  256.952 ms  268.926 ms
 9  * * *
10  * * *
11  * * *
12  * * *
13  a184-28-245-14.deploy.static.akamaitechnologies.com (184.28.245.14) [open]  258.474 ms  -544.095 ms  245.061 ms
```

핫스팟 vpn 사용후 메이플

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Selected device ipsec0, address 10.12.1.5, port 56115 for outgoing packets
Tracing the path to maplestory.g.nexon.com (222.122.222.115) on TCP port 80 (http), 30 hops max
 1  173.244.42.157  198.482 ms  236.333 ms  195.078 ms
 2  vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  196.875 ms
    vl4.sg-eqxsg3-evpn-gw20.globalsecurelayer.com (206.148.27.208)  198.148 ms
    vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  197.830 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  219.487 ms  183.878 ms  190.368 ms
 4  4766.sgw.equinix.com (27.111.229.142)  197.340 ms  238.966 ms  191.517 ms
 5  * * 112.174.87.137 244.547 ms
 6  112.174.86.89  245.142 ms  239.738 ms  240.108 ms
 7  * * *
 8  * * *
 9  112.191.125.95  261.010 ms  263.527 ms  313.741 ms
10  112.188.248.113  266.991 ms  259.772 ms  249.029 ms
11  61.74.69.26  255.796 ms  267.804 ms  260.530 ms
12  * * *
13  * * *
14  * * *
15  222.122.222.115 [open]  260.285 ms  279.627 ms  260.956 ms

```


공항와이파이 vpn 사용후 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Selected device ipsec0, address 10.13.1.3, port 56966 for outgoing packets
Tracing the path to www.naver.com (184.28.245.14) on TCP port 80 (http), 30 hops max
 1  173.244.42.158  274.210 ms  118.232 ms  143.119 ms
 2  vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  263.925 ms
    vl4.sg-eqxsg3-evpn-gw20.globalsecurelayer.com (206.148.27.208)  339.089 ms
    vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  90.648 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  42.312 ms  36.833 ms  53.564 ms
 4  unknown.globalsecurelayer.com (160.202.164.21)  60.594 ms  61.074 ms  59.825 ms
 5  ae1.r01.sin01.icn.netarch.akamai.com (23.56.138.34)  50.958 ms  52.816 ms  59.826 ms
 6  * * *
 7  ae8.r01.osa01.icn.netarch.akamai.com (23.215.54.158)  142.010 ms  175.603 ms  177.869 ms
 8  ae1.r02.osa01.ien.netarch.akamai.com (23.56.130.37)  177.102 ms  173.991 ms  176.218 ms
 9  * * *
10  * * *
11  * * *
12  * * *
13  * a184-28-245-14.deploy.static.akamaitechnologies.com (184.28.245.14) [open] 767.533 ms  127.414 ms

```

공항와이파이 vpn 사용후 메이플

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Selected device ipsec0, address 10.13.1.3, port 56982 for outgoing packets
Tracing the path to maplestory.g.nexon.com (222.122.222.115) on TCP port 80 (http), 30 hops max
 1  173.244.42.158  239.377 ms  85.375 ms  63.029 ms
 2  vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  45.890 ms  44.761 ms  35.753 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  47.821 ms  42.972 ms  62.199 ms
 4  4766.sgw.equinix.com (27.111.229.142)  49.923 ms  42.785 ms  48.368 ms
 5  112.174.87.137  118.575 ms  98.181 ms  102.853 ms
 6  112.174.91.109  109.640 ms  96.666 ms  98.746 ms
 7  * * *
 8  * * *
 9  * 112.191.125.21 117.057 ms  109.049 ms
10  112.188.248.107  108.731 ms  108.722 ms  111.523 ms
11  61.78.52.150  110.696 ms  107.572 ms  107.362 ms
12  * * *
13  * * *
14  * * *
15  222.122.222.115 [open]  109.121 ms  117.640 ms  150.895 ms

```


vpn 사용시 역시 vpn 공급자가 제공하는 네트워크를 사용하다 보니 물리적으로 다르더라도(공항와이파이 vs 로밍 핫스팟) 라우팅이 거의 같거나 비슷해지는것을 볼 수 있다. 

메이플의 dns lookup 결과 또한 달라진다. 이는 각 네트워크가 끼고있는 DNS 서버가 다르거나 생각하는 최적의 서버가 달라서 그런듯 하다.

vpn사용전

```kotlin
kimminseok@MacBook-Pro-16 ~ % nslookup maplestory.g.nexon.com
Server:		168.126.63.1
Address:	168.126.63.1#53

Non-authoritative answer:
Name:	maplestory.g.nexon.com
Address: 220.95.221.49
Name:	maplestory.g.nexon.com
Address: 222.122.222.115
Name:	maplestory.g.nexon.com
Address: 222.122.222.49
Name:	maplestory.g.nexon.com
Address: 220.95.221.115

```


vpn사용후

```kotlin
kimminseok@MacBook-Pro-16 ~ % nslookup maplestory.g.nexon.com
Server:		10.0.0.243
Address:	10.0.0.243#53

Non-authoritative answer:
Name:	maplestory.g.nexon.com
Address: 222.122.222.49
Name:	maplestory.g.nexon.com
Address: 220.95.221.49
Name:	maplestory.g.nexon.com
Address: 220.95.221.115
Name:	maplestory.g.nexon.com
Address: 222.122.222.115

```


각 네트워크 


### 국내 비교

한국와서 메이플 접속하면?
그다음날 한국 귀국 후 tcptraceroute로 비교

집인터넷 vpn 없이 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Password:
Selected device en0, address 192.168.219.105, port 58370 for outgoing packets
Tracing the path to www.naver.com (223.130.192.248) on TCP port 80 (http), 30 hops max
 1  192.168.219.1  2.484 ms  3.012 ms  3.567 ms
 2  125.186.138.129  5.385 ms  3.699 ms *
 3  10.243.33.189  3.417 ms * 7.689 ms
 4  * 1.208.14.197 6.472 ms  3.694 ms
 5  * * *
 6  210.206.56.202  20.161 ms  4.880 ms  5.003 ms
 7  100.68.83.154  8.446 ms  4.499 ms  4.846 ms
 8  100.68.87.138  4.654 ms  5.905 ms  6.232 ms
 9  117.52.1.166  5.559 ms  4.704 ms  4.044 ms
10  10.22.80.206  4.487 ms  5.021 ms  4.728 ms
11  10.104.243.70  5.811 ms  4.922 ms  5.534 ms
12  223.130.192.248 [open]  4.700 ms  6.155 ms  4.827 ms
```

집인터넷 vpn 없이 메이플

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Password:
Selected device en0, address 192.168.219.105, port 58385 for outgoing packets
Tracing the path to maplestory.g.nexon.com (220.95.221.115) on TCP port 80 (http), 30 hops max
 1  192.168.219.1  2.776 ms  2.557 ms  3.127 ms
 2  * * *
 3  1.213.14.193  3.621 ms
    10.243.33.189  3.306 ms
    1.213.14.193  3.388 ms
 4  1.213.14.193  4.838 ms  4.809 ms  3.802 ms
 5  * * *
 6  * * *
 7  203.229.222.233  4.964 ms  4.230 ms  5.306 ms
 8  * * *
 9  * * *
10  112.191.125.75  4.902 ms  5.811 ms  5.215 ms
11  112.188.248.99  5.930 ms  5.727 ms  5.841 ms
12  211.39.146.226  4.943 ms  5.413 ms  5.064 ms
13  * * *
14  * * *
15  * * *
16  220.95.221.115 [open]  8.058 ms  6.974 ms  6.654 ms
```

홉구간은 비슷하더라도 물리적으로 접근하는 데 용이해서 그런지 지연시간(ms)이 거의 20분의 1로 줄어든 것을 볼  수 있음.


집인터넷 vpn 사용후 네이버

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute www.naver.com
Selected device ipsec0, address 10.13.1.3, port 58578 for outgoing packets
Tracing the path to www.naver.com (184.29.44.205) on TCP port 80 (http), 30 hops max
 1  173.244.42.158  76.889 ms  76.146 ms  79.418 ms
 2  vl4.sg-eqxsg3-evpn-gw20.globalsecurelayer.com (206.148.27.208)  76.240 ms
    vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  76.554 ms  76.877 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  76.876 ms  78.095 ms  77.186 ms
 4  unknown.globalsecurelayer.com (160.202.164.21)  77.907 ms  78.330 ms  76.641 ms
 5  ae1.r01.sin01.icn.netarch.akamai.com (23.56.138.34)  76.208 ms  77.135 ms  77.175 ms
 6  * * *
 7  ae2.r01.osa03.ien.netarch.akamai.com (104.70.112.37)  150.027 ms  148.747 ms  150.468 ms
 8  * * *
 9  * * *
10  * * *
11  a184-29-44-205.deploy.static.akamaitechnologies.com (184.29.44.205) [open]  149.417 ms  149.878 ms  151.317 ms
```

집인터넷 vpn 사용후 메이플

```kotlin
kimminseok@MacBook-Pro-16 ~ % sudo tcptraceroute maplestory.g.nexon.com
Selected device ipsec0, address 10.13.1.3, port 58583 for outgoing packets
Tracing the path to maplestory.g.nexon.com (220.95.221.115) on TCP port 80 (http), 30 hops max
 1  173.244.42.158  77.008 ms  76.366 ms  76.415 ms
 2  vl4.sg-eqxsg3-evpn-gw20.globalsecurelayer.com (206.148.27.208)  76.756 ms
    vl4.sg-eqxsg3-evpn-gw21.globalsecurelayer.com (206.148.27.210)  77.166 ms  76.872 ms
 3  po7.sg-eqxsg3-bb5.globalsecurelayer.com (206.148.27.38)  76.795 ms  77.677 ms  76.713 ms
 4  4766.sgw.equinix.com (27.111.229.142)  75.985 ms  77.911 ms  75.746 ms
 5  112.174.87.137  135.389 ms  135.336 ms  134.795 ms
 6  112.174.91.157  135.262 ms  135.337 ms  135.627 ms
 7  * * *
 8  * * *
 9  112.191.125.83  143.934 ms  141.774 ms  142.754 ms
10  112.188.248.99  144.185 ms  142.744 ms  143.618 ms
11  61.78.52.150  143.491 ms  142.478 ms  142.624 ms
12  * * *
13  * * *
14  * * *
15  220.95.221.115 [open]  152.538 ms  142.704 ms *

```


물리적인 종속성이 없어지니 구린 네트워크 성능 그대로 나와버렸다. 
vpn 사용하면 지역에 영향을 적게 받고 어디에서나 비슷한 품질의 네트워크를 이용할 수 있는 대신에 위와 같은 사례에서는 한국에서 메이플 접속하는것만 못하다..는 결과가 나온다


VPN을 사용하면 traceroute 결과가 전세계 어딜 가서든 VPN 공급자의 네트워크망을 타기 때문에 논리적으로 같지만 실제로 해당 네트워크로 접속하는데 물리적인(지리적인) 차이가 나서 논리적 경로는 최적화 될 수 있지만 핑을 한국과 완벽하게 같게 할 수는 없다.

`traceroute` 텍스트 결과가 비슷하게 보이더라도, **물리적인 퍼포먼스(핑, 지연 시간)는 많이 차이남.** 이는 결과의 **응답 시간(ms)** 차이에서 명백하게 드러남.

| **특징** | **인도네시아 → 한국 VPN → 넥슨 서버** | **한국 → 한국 VPN → 넥슨 서버** |
| --- | --- | --- |
| **물리적 거리** | 멈 | 가까움 |
| **국제망 경유** | 필수 (해저 케이블) | 없음 (국내망 사용) |
| **응답 시간 (핑)** | **150ms ~ 300ms+** | **5ms ~ 30ms** |
| **게임 체감 속도** | 렉 발생 가능성 높음 | 빠르고 안정적임 |

**인도네시아:** 데이터가 수천 킬로미터 떨어진 한국 VPN 서버까지 이동하는 데 물리적인 시간이 오래 걸림. 홉 개수는 같아도 각 홉의 응답 시간이 길 수 밖에 없음
**한국:** 데이터가 수 킬로미터 내의 VPN 서버까지 이동하므로 응답 시간이 매우 짧음.


### 왜 물리적인 차이가 날까?

데이터는 광케이블을 통해 빛의 속도로 이동함. 진공 상태에서는 빠르지만, 유리 섬유로 된 광케이블 속에서는 빛의 속도가 약 3분의 2 정도로 느려짐.
**인도네시아 - 한국 간 거리:** 대략 4,000km가 넘음. 데이터가 이 거리를 왕복(Round Trip Time, RTT)하는 데 걸리는 최소 물리적 시간만 해도 수십 밀리초(ms) 추가로 걸림.
**최적화의 의미:** 최적화는 4,000km를 8,000km로 돌아가는 것을 막아주는 것이지, 4,000km를 0km로 만들어주는 것이 아니기 때문에 물리적인 한계는 여전히 존재.
네트워크 장비 지연
논리적으로 a→b 로 가는 라우팅은 최적화가 되지만 중간에 물리적으로 존재하는 장비들도 있음. 이것들을 거쳐가는데 생기는 지연시간도 무시할 수 없음.
(내 공유기) → (아파트/건물 내 스위치) → (ISP 지역 허브 스위치/라우터) → (ISP 코어 라우터) → ... → (국제망 게이트웨이) → ... → (목적지 서버 앞 라우터) → (목적지 서버)
`traceroute`는 이 중에서 IP 주소를 가지고 있는 **라우터**들만 식별 가능. 스위치 같은 L2 장비는 IP가 없거나 추적에 응답하지 않으므로 `traceroute` 결과에 없었을 뿐 물리적인 홉은 더 차이가 많이 났을 것임.
국제 해저 케이블 인프라 제약
1번과 비슷한데 VPN이 논리적으로 좋은 경로를 제공해도 결국 물리적으로 전기신호가 당도하려면 해저케이블 지나가야함. + 거리가 멀다
