---
title: "스택이 무진장 커진다면 힙은 필요없을까?"
date: 2025-03-29
tags: [미지정]
---
[면접관이 물었다. 만일 스택이 매우 커질 수 있다면 힙은 불필요할까?](https://www.youtube.com/watch?v=9TSojdIr8Q0)
메이플할때 틀어놓을 영상 찾다가 못참고 누름


![](attachment:e3d19a78-ef98-4d61-9a70-e1d505f13088:image.png)

우리가 흔히 알고 있는 그것

### 스택

정적 메모리 할당
컴파일타임에 메모리가 결정 됨
왜냐하면 컴파일 타임에 위 변수들은 수명 추적이 가능하기 때문
함수 호출 시 스택 증가, 함수 호출 완료 시 소멸
함수 호출과 관계되는 지역변수 매개변수 반환주소 저장
 

### 힙

동적 메모리 할당
사용자 메모리 관리의 영역

## 그러므로


### 크기의 관점

호출 스택이 무한정 늘어나는 것은 논리적으로 비효율적일 확률이 높음. 즉 크기의 관점으로 봤을 때 스택이 무진장 커진다는것은 극단적으로 stackoverflow 에러를 내지 않겠다는것.
A() → 내부에서 B() → 내부에서 C() … 이렇다는것은 스택을 쌓는것인데, 이런 구조가 과연 논리적으로 허용되어야 하는가?

### 구조의 관점

스택의 경우 함수 호출 끝나면 소멸함. 즉 특정 함수 범위를 넘어서 존재해야하는 변수나 인스턴스는 관리가 안됨.
멀티스레딩 환경 : 여러 스레드가 동시에 스택에 접근?? 이건 구조적으로 안됨
스레드가 동시에 힙에 접근 하겠지..
자바의 관점에서는 아래와 같음.

![](attachment:685b046a-163e-4410-85f4-d77c59d3ff2d:image.png)

> 자바 어플리케이션에서 만들어지는 모든 객체들 (Wrapper class 포함)이 heap에 저장된다. 객체가 생성되고 지역 변수에 할당 되었는지, 아님 다른 객체의 멤버 변수로 생성되었는지에 상관 없이 모든 객체는 힙에 저장된다.
> 지역 변수가 객체를 참조할 수 있다. 이 경우 참조값은 스레드 스택에 저장되지만 객체는 힙에 저장된다. 객체에 메소드가 있고, 그 메소드는 지역 변수를 가지고 있을 수 있다. 이 때 객체의 메소드가 heap에 저장되더라도 메소드 안에 있는 로컬 변수들은 스레드 스택에 저장된다. 객체의 멤버 변수(primitive type, reference type 상관 없이)도 객체와 함께 힙 영역에 저장된다.
각 스레드간 독립적인 스택을 가지기 때문에.. 멀티스레딩이 안됨

[[Java] 자바 메모리 모델](https://medium.com/lucky-sonnie/java-%EC%9E%90%EB%B0%94-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%AA%A8%EB%8D%B8-2cb0db2a4e1d)
