---
title: DDL
date: 2024-02-28
tags:
  - 주식서비스
  - 기획
  - 케이뱅크
category:
  - 실무경험
---

```sql
create sequence sq_stk_inte_noli_stck_01
    increment by 50;

alter sequence sq_stk_inte_noli_stck_01 owner to root;

create sequence sq_stk_noli_stck_daily_info_01
    increment by 50;

alter sequence sq_stk_noli_stck_daily_info_01 owner to root;

create sequence sq_stk_noli_stck_orgnl_m_01;

alter sequence sq_stk_noli_stck_orgnl_m_01 owner to root;

create table tb_stk_inte_noli_stck
(
    amnn_dttm    timestamp(6),
    id           bigint not null
        primary key,
    lnp_sqn      bigint,
    rgst_dttm    timestamp(6),
    amnn_guid_id varchar(255),
    amnn_id      varchar(255),
    cust_id      varchar(255),
    inte_yn      varchar(255)
        constraint tb_stk_inte_noli_stck_inte_yn_check
            check ((inte_yn)::text = ANY ((ARRAY ['Y'::character varying, 'N'::character varying])::text[])),
    itms_cd_nbr  varchar(255),
    rgst_guid_id varchar(255),
    rgst_id      varchar(255)
);


create table tb_stk_mbrs_info
(
    efctv_yn     smallint
        constraint tb_stk_mbrs_info_efctv_yn_check
            check ((efctv_yn >= 0) AND (efctv_yn <= 1)),
    amnn_dttm    timestamp(6),
    rgst_dttm    timestamp(6),
    amnn_guid_id varchar(255),
    amnn_id      varchar(255),
    cust_id      varchar(255) not null
        primary key,
    rgst_guid_id varchar(255),
    rgst_id      varchar(255)
);

create table tb_stk_noli_m
(
    amnn_dttm    timestamp(6),
    rgst_dttm    timestamp(6),
    amnn_guid_id varchar(255),
    amnn_id      varchar(255),
    itms_cd_nbr  varchar(255) not null
        primary key,
    orgnl_url    varchar(255),
    ovcn_info    varchar(255)
        constraint tb_stk_noli_m_ovcn_info_check
            check ((ovcn_info)::text = ANY ((ARRAY ['전문종목'::character varying, '일반종목'::character varying])::text[])),
    rgst_guid_id varchar(255),
    rgst_id      varchar(255),
    stck_nm      varchar(255),
    stck_sts     varchar(255),
    use_yn       varchar(255)
        constraint tb_stk_noli_m_use_yn_check
            check ((use_yn)::text = ANY ((ARRAY ['Y'::character varying, 'N'::character varying])::text[]))
);


create table tb_stk_noli_stck_daily_info
(
    estmt_wrth      numeric(38, 2),
    prss_wrth       numeric(38, 2),
    tdy_chng_rate   double precision,
    amnn_dttm       timestamp(6),
    anl_max_price   bigint,
    anl_min_price   bigint,
    base_dttm       timestamp(6),
    id              bigint not null
        primary key,
    inqry_cnt       bigint,
    prdd_base_price bigint,
    prdd_max_price  bigint,
    prdd_min_price  bigint,
    rgst_dttm       timestamp(6),
    tdy_chng_price  bigint,
    amnn_guid_id    varchar(255),
    amnn_id         varchar(255),
    itms_cd_nbr     varchar(255),
    rgst_guid_id    varchar(255),
    rgst_id         varchar(255)
);


create table tb_stk_noli_stck_orgnl_m
(
    estmt_wrth      numeric(38, 2),
    prss_wrth       numeric(38, 2),
    tdy_chng_rate   double precision,
    amnn_dttm       timestamp(6),
    anl_max_price   bigint,
    anl_min_price   bigint,
    base_dttm       timestamp(6),
    id              bigint not null
        primary key,
    inqry_cnt       bigint,
    prdd_base_price bigint,
    prdd_max_price  bigint,
    prdd_min_price  bigint,
    rgst_dttm       timestamp(6),
    tdy_chng_price  bigint,
    amnn_guid_id    varchar(255),
    amnn_id         varchar(255),
    itms_cd_nbr     varchar(255),
    orgnl_url       varchar(255),
    ovcn_info       varchar(255)
        constraint tb_stk_noli_stck_orgnl_m_ovcn_info_check
            check ((ovcn_info)::text = ANY ((ARRAY ['전문종목'::character varying, '일반종목'::character varying])::text[])),
    rgst_guid_id    varchar(255),
    rgst_id         varchar(255),
    stck_nm         varchar(255),
    stck_sts        varchar(255)
);


create table tb_stk_push_agrm_h
(
    amnn_dttm            timestamp(6),
    rgst_dttm            timestamp(6),
    seq_nbr              bigint       not null,
    amnn_guid_id         varchar(255),
    amnn_id              varchar(255),
    astm_push_alrt_yn    varchar(255)
        constraint tb_stk_push_agrm_h_astm_push_alrt_yn_check
            check ((astm_push_alrt_yn)::text = ANY ((ARRAY ['Y'::character varying, 'N'::character varying])::text[])),
    cust_id              varchar(255) not null,
    rgst_guid_id         varchar(255),
    rgst_id              varchar(255),
    stck_push_alrt_tp_cd varchar(255) not null,
    primary key (seq_nbr, cust_id, stck_push_alrt_tp_cd)
);


create table tb_stk_push_agrm_m
(
    amnn_dttm            timestamp(6),
    rgst_dttm            timestamp(6),
    amnn_guid_id         varchar(255),
    amnn_id              varchar(255),
    astm_push_alrt_yn    varchar(255)
        constraint tb_stk_push_agrm_m_astm_push_alrt_yn_check
            check ((astm_push_alrt_yn)::text = ANY ((ARRAY ['Y'::character varying, 'N'::character varying])::text[])),
    cust_id              varchar(255) not null,
    rgst_guid_id         varchar(255),
    rgst_id              varchar(255),
    stck_push_alrt_tp_cd varchar(255) not null,
    primary key (cust_id, stck_push_alrt_tp_cd)
);

```


1. **tb_stk_inte_noli_stck_m**
  - amnn_dttm (timestamp(6))
  - id (bigint) [Primary Key]
  - lnp_sqn (bigint)
  - rgst_dttm (timestamp(6))
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - cust_id (varchar(255))
  - inte_yn (varchar(255) [Check: 'Y', 'N'])
  - itms_cd_nbr (varchar(255))
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
2. **tb_stk_mbrs_info_m**
  - efctv_yn (smallint [Check: 0, 1])
  - amnn_dttm (timestamp(6))
  - rgst_dttm (timestamp(6))
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - cust_id (varchar(255)) [Primary Key]
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
3. **tb_stk_noli_m**
  - amnn_dttm (timestamp(6))
  - rgst_dttm (timestamp(6))
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - itms_cd_nbr (varchar(255)) [Primary Key]
  - orgnl_url (varchar(255))
  - ovcn_info (varchar(255) [Check: '전문종목', '일반종목'])
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
  - stck_nm (varchar(255))
  - stck_sts (varchar(255))
  - use_yn (varchar(255) [Check: 'Y', 'N'])
4. **tb_stk_noli_stck_daily_info_m**
  - estmt_wrth (numeric(38, 2))
  - prss_wrth (numeric(38, 2))
  - tdy_chng_rate (double precision)
  - amnn_dttm (timestamp(6))
  - anl_max_price (bigint)
  - anl_min_price (bigint)
  - base_dttm (timestamp(6))
  - id (bigint) [Primary Key]
  - inqry_cnt (bigint)
  - prdd_base_price (bigint)
  - prdd_max_price (bigint)
  - prdd_min_price (bigint)
  - rgst_dttm (timestamp(6))
  - tdy_chng_price (bigint)
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - itms_cd_nbr (varchar(255))
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
5. **tb_stk_noli_stck_orgnl_m**
  - estmt_wrth (numeric(38, 2))
  - prss_wrth (numeric(38, 2))
  - tdy_chng_rate (double precision)
  - amnn_dttm (timestamp(6))
  - anl_max_price (bigint)
  - anl_min_price (bigint)
  - base_dttm (timestamp(6))
  - id (bigint) [Primary Key]
  - inqry_cnt (bigint)
  - prdd_base_price (bigint)
  - prdd_max_price (bigint)
  - prdd_min_price (bigint)
  - rgst_dttm (timestamp(6))
  - tdy_chng_price (bigint)
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - itms_cd_nbr (varchar(255))
  - orgnl_url (varchar(255))
  - ovcn_info (varchar(255) [Check: '전문종목', '일반종목'])
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
  - stck_nm (varchar(255))
  - stck_sts (varchar(255))
6. **tb_stk_push_agrm_h**
  - amnn_dttm (timestamp(6))
  - rgst_dttm (timestamp(6))
  - seq_nbr (bigint) [Primary Key]
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - astm_push_alrt_yn (varchar(255) [Check: 'Y', 'N'])
  - cust_id (varchar(255)) [Primary Key]
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
  - stck_push_alrt_tp_cd (varchar(255)) [Primary Key]
7. **tb_stk_push_agrm_m**
  - amnn_dttm (timestamp(6))
  - rgst_dttm (timestamp(6))
  - amnn_guid_id (varchar(255))
  - amnn_id (varchar(255))
  - astm_push_alrt_yn (varchar(255) [Check: 'Y', 'N'])
  - cust_id (varchar(255)) [Primary Key]
  - rgst_guid_id (varchar(255))
  - rgst_id (varchar(255))
  - stck_push_alrt_tp_cd (varchar(255)) [Primary Key]

