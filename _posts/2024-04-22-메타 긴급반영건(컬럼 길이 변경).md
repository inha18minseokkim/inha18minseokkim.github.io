---
title: "메타 긴급반영건(컬럼 길이 변경)"
date: 2024-04-22
tags: [미지정]
category: 기타
---
주식 데이터를 적재하다가 numeric 타입에서 overflow 발생한 것 확인
변동률을 낮게 잡았는데 1100.00% 이런식으로 데이터가 나와서 컬럼 길이가 안됐음
결국 DB 긴급 반영함 Numeric(7,4) → Numeric(19,2)
그냥 처음부터 19,2로 반영할껄..
1차적으로는 테스트케이스로 못잡은 내 잘못
  1. 처음에 잡을 때 7,4로 잡혔을 때 굳이 확인을 한번 더 했어야
  2. 비상장주식의 경우 10배 떡상도 가능하다고 생각을 했어야
2차적으로는 테스트 데이터로만 수행을 하다가 운영 반영 날 방화벽을 뚫어서 첫 운영 데이터 적재를 수행한 것이 문제가 아닐까
  1. 두나무측에서 망분리 요건 때문에 운영 uri 접근 시 ip 방화벽 사용
    1. 식품물가와 다르게 public에서 데이터 못가져옴(식품물가는 오픈api라서 그냥 로컬에서 쏴서 데이터 수집, 선적재 가능)
  2. 우리도 방화벽 사용
  3. 보안성심의를 운영 반영 당일에 해주는게 맞나..
  4. 결국 스테이징에서 수행해서 걸러졌을 테스트를 운영에 와서 찾고 있음

