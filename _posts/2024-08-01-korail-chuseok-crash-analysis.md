---
title: "추석 KTX 예매 시 코레일이 터진 이유에 대한 추측"
date: 2024-08-01
tags: [아키텍처, 인프라, 삽질, 장애분석]
---

추석 대구행 KTX를 예매하면서 재미있는 관찰을 했다.

## 상황

9월 17일 추석에 대구로 내려가는 KTX를 예매해야 했다. 동생도 같이 예매 도전.

수강신청 경험을 살려 서버시간 기준으로 땡! 하고 동시 진입:

- **동생**: iOS Safari
- **나**: macOS Chrome + Android Chrome 동시에 누름

**결과:**
- 동생: 대기열 접속 페이지 자체를 못 들어감 (네트워크 통신 실패)
- 나: macOS Chrome 성공 (9800번대 대기열 → 10분 안에 예매 완료), Android Chrome 실패 (대기열 접속 실패)

---

## 분석

### 관찰 1: 모바일 실패, 데스크톱 성공

동생(iOS)도 실패, 내 Android도 실패, 내 macOS Chrome만 성공.

**추측:** 모바일 웹 서버와 데스크톱 웹 서버가 분리되어 있다.

이는 일반적인 대용량 트래픽 처리 패턴이다. 모바일 사용자가 훨씬 많으니 모바일 프론트 서버에 트래픽이 집중되어 모바일 쪽만 터진 것으로 보인다.

### 관찰 2: 코레일이 이번에 웹서버를 신규 구축했음

기존 레거시 시스템에서 새 인프라로 전환하면서 모바일/데스크톱 서버 사이즈 배분을 잘못 잡았을 가능성.

### 관찰 3: WAS는 일원화되어 있지 않을까

프론트 서버(정적 파일, 대기열 진입)는 나뉘어 있더라도, 실제 예매 처리 WAS는 하나로 통합되어 있을 가능성이 높다.

---

## 아키텍처 추측

```
[모바일 웹 서버] ─┐
                  ├──→ [대기열 시스템] ──→ [예매 WAS] ──→ [DB]
[PC 웹 서버]    ─┘
```

추석 예매 오픈 시 트래픽:
- 모바일 사용자: 훨씬 많음 (대부분 스마트폰으로 접속)
- PC 사용자: 상대적으로 적음

모바일 웹 서버 용량을 PC 웹 서버보다 충분히 크게 잡았어야 했는데, 신규 구축 시 이 비율을 잘못 설정한 것으로 보인다.

---

## 결론

서버시간 기준으로 정확히 땡에 눌러도 어떤 디바이스로 접속하느냐에 따라 성공 여부가 갈린다는 걸 직접 경험했다. 수강신청 경쟁과 비슷하게, 모바일보다 PC 데스크톱이 유리한 셈이다.

나는 성공했지만 동생 티켓은 결국 못 잡았다...
