---
title: "당행 앱 기획할때 토스를 보고 그리면 안되는 이유 2"
date: 2025-11-16
tags: [미지정]
category: 기타
---

![](attachment:fb00f821-ff6c-461b-a694-431d99d9e0dc:image.png)


![](attachment:20170b20-d96b-49f0-9787-4bd75d798c44:image.png)


주간 투자왕 개발을 하면서 채널개발자와 많은 이야기를 하던 중 이상한 점을 발견함
처음 메인 화면을 띄우는 데 뭔가 자꾸 쉽지않다고 하심
1. 계정계 호출해서 계좌검증 및 사고내역 검증
2. 문제없으면 고객이 게임 가입 되어있는지 조회(계정계 + 주간투자왕 Backend)
3. 게임가입 안되어있으면 동의서 받고 가입시키고 다시 돌아가서 조회 ㄱㄱ
4. 최신 게임 조회 ⇒ gameId, gameStatus
5. 고객의 게임 최신 게임 참여 조회 ⇒ latestGameId, reward
6. 4의 gameStatus가 OPEN이고 5의 latestGameId와 4의 gameId가 다르면 고객이 지금 열려있는 게임에 참여하지 않았다는것이므로 이전 게임 결과화면으로 보냄
  1. 그리고 결과화면 다 보고 상금 받는 씬 태운다음 latestGameId를 현재 gameId로 맞춤
7. 같다면 메인 씬으로 ㄱㄱ
8. 만약 gameStatus가 COUNTING이라면 휴장일 화면으로

이런식으로 채널에서 풀겠지? 라는 생각으로 API를 상당히 Restful 하게 쪼개서 짰음
그런데 알고보니 원하는 결과 화면을 만들기 위해서는 3번쯤 갔을때 뒤에 api들을 호출하기 위해서는 게임 메인화면, 리워드 결과화면, 휴장일화면을 모두 띄우고 위에서 화면 전환 로직을 짜야된다는것; 정확하게 이게 무슨 말인지 잘 몰라서 MPA 구조에 대해 알아봄

## JSP 기반 멀티페이지 어플리케이션(MPA)

- **화면 전환 방식**: 사용자가 특정 액션을 하면 서버에 요청 → 서버가 필요한 모든 데이터를 처리해서 새로운 HTML(페이지 전체)을 완성하여 반환 → 브라우저는 전체 페이지를 새로고침하며 기존 상태는 사라지고 필요한 UI가 나타남.
- **데이터 흐름 및 상태 관리**: 각 요청마다 독립적으로 동작. 게임 메인, 결과, 휴장일 각각 별도 페이지임. 각각의 화면 로직(API 연계, 상태 판별 등)은 서버에서 한다.
- **실제 사례 적용**:
  - 게임 메인 진입 시 서버가 계정계·게임가입 여부·최신게임 정보·리워드 등 여러 API를 호출해 최종 "메인" HTML 페이지를 반환.
  - '이전 게임 결과' 화면, '휴장일' 화면도 각 자신의 URL/경로/페이지에서 서버가 처리, Redirect나 새 페이지 응답.
  - **프론트에서 화면 전환 로직을 직접 당장 신경 안써도 됨.** 화면별 따로 만들어서 서버에서 답을 다 내려주면 됨.
이제 이러한 설명을 보고나서 채널 개발자에게 화면 제어권을 줘버린것이 MPA 환경에서 얼마나 재앙이냐 라는것을 생각

실제로 내가 의도하고 짠 api는 다음과 같은 환경에서 만들어진다

## SPA(Single Page Application)

- **화면 전환 방식**: 최초 한 번 쿼리로 HTML·JS 리소스 다 받음. 이후 모든 화면 전환(UI 변화)은 브라우저 JS가 제어.
- **데이터 흐름 및 상태 관리**: 서버는 대부분 JSON으로 데이터만 제공. 프론트엔드가 필요한 데이터(계정계/게임가입/최신게임정보 등)를 연속적으로 여러 API로 요청해서, 그 결과에 따라 "지금 어떤 화면(메인/결과/휴장일)"을 보여줄지 클라이언트에서 직접 제어.
- **실제 사례 적용**:
  - 첫 진입 시 여러 단계로 API(N개)를 비동기로 호출해서, 조건에 따라 여러 화면(메인/결과/휴장일) 중 하나로 이동 로직 구현.
  - 예를 들어, 고객이 참여 안 했으면 → 이전 게임 결과 띄움 → 리워드 받기 완료하면 최신게임 메인 띄움(여러 단계를 프론트에서 상태관리하고 분기).
  - **모든 화면 분기 흐름을 프론트에서 직접 구현**해야 하며, 여러 stage에 따라 다양한 UI/컴포넌트 상태 조절 필요.


| **특징** | **JSP 기반 MPA** | **SPA 방식** |
| --- | --- | --- |
| 화면 전환 | 매번 페이지 전체 새로고침, 서버가 모든 UI 처리 | 한 번 로딩, 이후 모든 전환/분기는 JS가 직접 제어 |
| API 사용 패턴 | 서버가 페이지 합성 시 한 번에 모두 호출 | 프론트가 필요한 API 연속/동시 호출하여 비동기로 상태판단·구현 |
| 상태 및 조건 분기 | 서버에서 결과에 따라 redirect, 결과 페이지 분리 | 화면별 분기, 여러 단계 조건 처리 및 UI 구성 직접 처리 |
| 구현 난이도 | 서버 중심(단순), 프론트는 결과만 표시 | 프론트(채널개발자)가 복잡한 분기·상태관리 직접 구현 |
| UX | 전체 페이지 리로드, 상태 초기화 가능성 높음 | 부드러운 전환, 더 나은 사용자 경험(빠름/자연스러움) |
| 문제점(예시) | 화면마다 API 조작은 분리 | 한 화면에서 여러 상태 분기/화면 구성 로직을 직접 프론트에서 구현해야해 난이도 상승 |

현재 케이뱅크 앱이 JSP 기반으로 동작하기 때문에 한 화면에서 컴포넌트를 갖다 붙였다 떼는 그러한 형태가 상당히 제한적이다 라는 것을 깨달음 

### 이해한 점

그래서 내가 설계한 api를 가지고 화면 만들어 달라고 하면 처음에 페이지가 세 장씩 넘어가는구나..

### 그럼 비상장주식은 어떻게 구현한거지

[동영상](attachment:9c4c247c-8994-4471-b260-f53b8599f55b:KakaoTalk_Video_2025-11-17-21-11-20.mp4)
api 호출이 끝난 놈 부터 부드럽게 로딩이 다 되어서 ~~프론트 개발자를 갈아넣으면 어떻게든 되는줄 알았는데~~
사실 Highchart 라이브러리가 알아서 잘 해 준것 같음.


### 요약

SPA 전환할거면 제가 만든 서비스부터좀..