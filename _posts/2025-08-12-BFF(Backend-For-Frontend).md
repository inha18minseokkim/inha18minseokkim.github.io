---
title: "BFF(Backend-For-Frontend)"
date: 2025-08-12
tags:
  - 개발
  - 아키텍처
category:
  - 기술
---
위 일련의 과정들을 수행하면서 이러한 기술적 고민들을 역시 다른 사람들도 했다는것을 알게 됨.
 BFF는 "Backend for Frontend"의 약자로, **프론트엔드 개발자가 클라이언트와 백엔드 사이에서 인터페이스 역할을 수행**하는 개념이다. 기존의 모놀리틱 아키텍처에서는 백엔드가 클라이언트의 요청을 직접 처리하는 구조였지만, 마이크로서비스 아키텍처에서는 백엔드가 여러 개의 독립적인 서비스로 분리되는 경향이 생기면서 BFF의 필요성이 대두되었다.

![](attachment:26506c73-41b6-48fe-84da-ea7cef2cda80:image.png)

예를 이런식으로 뒀는데, 현재 편의서비스/주식도 같음

![](attachment:b41347cb-2382-4e69-8f34-165e4ed91009:image.png)

다음과 같은 상황에서 장점 가져감
1. 하나의 기능(뷰)를 완성하기 위해 여러 도메인의 api를 활용해야 할 때
  1. 투자 둘러보기 서비스 메인 화면에서 검색을 눌렀을 때 국내주식을 검색하면
    1. 국내주식의 기준정보
      1. 를 좋아하는지 안좋아하는지 고객의 정보
      2. 와 국내주식의 최신가격 
      3. 과 국내주식을 구성종목으로 갖고 있는 ETF들의 정보
        1. 의 최신가격
    - 이런식으로 다양한 백엔드에서 api를 가지고 올 때 조합 할 주체가 필요ㅎ
2. 불필요한 데이터를 숨겨야 하는 경우
  1. 채X서비스개발팀 이X원님 : 모든 필드를 다 던지면 솔루션에서 자괴감 드는 그 행위를 많이 해야해서 필요한것만 달라
  2. 백엔드 입장 : 그러면 채널 향 api를 따로 구성 해야 함, 채널은 백엔드 관점이 아니라 화면 관점에서 api를 바라보기 때문에 가치 충돌 가능성 있음
  3. 중재 : mediation 에서 다 해줬잖아
3. 프론트에서 연산을 해야하는 경우 + 프론트 비즈니스 로직 일부 위임 가능
  1. 채널개발자 부담을 덜어보자
4. 빠른 변경 가능
  1. 채널이나 비즈니스에서 요구사항이 변경되거나 추가되었을 때 95% BFF만 변경하면 됨
  2. 왜냐하면 기준정보 api는 이미 백엔드에 구성되어있다는 전제하에 mediation 개발
다음과 같은 단점이 있음
1. 네트워크 구간 1홉 증가
  1. 로깅하고 관리할 대상 추가, 트레이싱할때 여기서 안받아주는것도 에러 핸들링 시 고려해야 함
2. 코드 양 증가
  1. HTTP Request, Response를 구성하기 위해 mediation에 별도의 로직을 만들어야 함. 백엔드 api가 추가된다면 mediation에도 해당 api를 받기 위해 유사한 코드를 한 벌 더 추가해야 함
  2. 4-b에서 전제 하였듯이, 일단 백엔드 구성이 다 되어야 함,, 그러므로 초기에는 두 벌 만들어야함
3. 그에 따른 책임 분리 원칙 관리 필요
  1. 기존에는 백엔드는 기준정보 제공, 프론트는 매핑이라는 명확한 책임한계가 존재하였지만(물론 또 100% 그렇지도 않았음) 채널이 하는 일을 mediation이 일부 가져오기 때문에 어떤 로직은 채널이 갖고있고 어떤 로직은 mediation이 갖고있음(가장 아쉬운 점)

## FAQ)


### 그럼 그냥 ipo,unlisted,listed,overseas 들을 다 한곳에서 모아놓고 조합하면 안되나요?

MSA라 도메인 단위로 쪼갠겁니다. 모놀리틱도 충분히 장점이 있고, 만약 그렇게 했다고 하더라도 화면 한번에 쿼리 한번이라는 구조에서 벗어나지 못할 것 > 쿼리 비대해지면 유지보수 힘듬. 
  - 은행코어쪽은 데이터가 패턴이 정해져있는데 여기는 그렇지 못해서(예상치 못한 컬럼이 비어서 들어와도 다른 컬럼은 살려야 되는 등, 갑자기 데이터가 비어서 조인 실패 등) 특정 요건이 자주 바뀜. 그럴 때 마다 쿼리를 뜯어고쳐야 하는데 난 그거 못해. 이런 핸들링은 프로그램 언어가 더 잘함
도메인의 관점에서 왜 저렇게 쪼갰냐라는 답변은 저 데이터들이 증권이라는 공통점은 있지만 각각의 속성이 너무나도 다르기 때문에 개별 프로젝트에서 각각의 핵심가치를 극대화 시킬 수 있는 구조, api를 만들고 싶었음

### 왜 원쿼리로 개발해야 하나요?

만약 해당 구조가 모노 구조인데 원쿼리가 아니라면 개별 함수를 N번 호출해야 함. 거의 10번 호출하는 화면도 있는데, 쿼리 IO를 10번 하면 너무 느림. 그럼 별도의 스레드 관리 해야 한다. 또는 코루틴 + r2dbc를 사용해야 퍼포먼스가 보장이 될듯.

### 그러면 mediation은 병렬호출 사용하나요?

webclient + coroutineScope를 사용하여 논블로킹 호출 사용중. 뒷단의 서비스는 JPA MVC + Cache로 구현되어있음. HTTP 호출만 구현하기 때문에 scale이 빠름. 따라서 유저 트래픽이 많아지는 경우 mediation 만 증설하는것으로 충분히 핸들링 가능함. 
백엔드 서비스의 경우 DB가 모노 구조이기 때문에 함부로 Scale Up을 하는 경우 모 db의 자원이 고갈되어 리워드 서비스가 멈춰버리는 사소한? 문제가 있어서 함부로 늘리기도 그렇다.


### 결론

위와 같은 사유로 투자서비스 개발할 때는 mediation에서 화면개발을 하도록 하겠다 채널 담당자들 어차피 개발할때 백엔드 코드 안건드려서 부담없으니 하고싶으신거 있으면 그냥 말씀해주세요,, 
