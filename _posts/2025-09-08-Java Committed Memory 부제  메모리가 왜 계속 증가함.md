---
title: "Java Committed Memory 부제 : 메모리가 왜 계속 증가함?"
date: 2025-09-08
tags:
  - Java
  - 이슈정리
category:
  - 실무경험
---

### 선 한 줄 요약

자바는 메모리를 제때 주지 않음


### 문제점

팀 내에서 SCG 메모리 누수있는것같다해서 같이 봄


### 결과

그런건 없었다

JVM이 초기에 메모리를 할당해서 자바가 메모리를 런타임에 동적으로 할당하고 해제하는데 오버헤드 줄임(필요할때 부랴부랴 할당하다가 GC 일으키지 말고 미리미리 알잘딱깔센으로 여유분 예약해놔)
이미 가지고 있는 여유 메모리 자원을 활용해서 추가적으로 메모리를 할당하는 등 오버헤드를 줄여 성능 향상 가능. > 다시 언제든지 여유분이 있다
**문제**는 이게 OS 레이어에서 봤을 때 JVM 사정은 알 바 아님 어떤 프로세스가 미리 메모리를 할당해놨다
 > OS **曰**) 우린 이걸 메모리를 사용중이다 라고 부르기로 했어요
그러니깐 OS Layer를 모니터링 하는 그라파나 입장에서는 이렇게 보임

![이미지](/assets/images/Pasted%20image%2020260225084332.png)

??? : 예약해놓은건 알겠는데 어쨌든 프로세스가 쓰는거잖아

개발자 입장에서는 이게 시간이 지날수록 그냥 메모리가 장기 우상향하네?? 이거 GC 잘 안돼서 메모리 누수 나는거 아닌가? 라는 생각을 할 수도 있게 만들어놓음
그런데 실제로는 이런식으로 안에서 메모리를 쓰고 놓고 쓰고 놓고를 계속 반복한다.

![이미지](/assets/images/Pasted%20image%2020260225084339.png)

그래서 JVM이 이정도는 그냥 갖고 있어야 나중에 또 쓰겠거니 하면서 메모리 점유를 놓지 않는것

그라파나도 플러그인 쓰면 이렇게 보임 ㅎㅎ;;;

![이미지](/assets/images/Pasted%20image%2020260225084347.png)


실제로 보면 자바 힙사이즈를 이런식으로 관리하잖아

![이미지](/assets/images/Pasted%20image%2020260225084352.png)

이 사이에 Committed Memory가 있을 뿐..

![이미지](/assets/images/Pasted%20image%2020260225084356.png)


+) 요즘(이라고 해도 10년 넘음) 은 퍼포먼스를 향상시키기 위해 Native Memory를 사용하는 경우도 많다. 이런 경우 Off Heap, 즉 Heap 바깥 OS 의 메모리를 직접 사용해서 JVM 내부로의 데이터 이동 없이 레퍼런스만 바꿔버리는 식으로 처리하기도 함 ex) ehCache, Netty 등등..
