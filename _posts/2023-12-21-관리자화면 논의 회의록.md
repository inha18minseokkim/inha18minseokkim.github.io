---
title: 관리자화면 논의 회의록
date: 2023-12-21
tags:
  - MSA
  - 케이뱅크
category: 실무경험
---

### 어느 한 회사 사례

각 기능마다(채팅관리자,게시물관리자 등등) 각각의 컨테이너를 띄움(각각 MVC, 도메인마다 기술스택 다다름 담당자도 다름)
  - 그리고 각각의 업무영역의 MVC는 AWS Cognito 사용
  - 애초에 각각 DB들이 다 찢어져 있는 상황이라 기술스택까지 맞춰질 이유가 없었다고 함(?)
맨 앞에서 heimdall 이나 dashy처럼 사이트맵을 제공해주는곳에서 사내 sso 연동하고 보여줌
  - 여기서 권한에 맞는 사이트만 골라서 보여주고 이동시켜줌
그리고 맨 앞단의 사이트에서 각 직원 사번별로 권한 관리하는 DB 따로 있음(Auth api + Admin api)
책임자결재 같은 기능은 없다고 함. 단순히 해당 페이지 접근 권한 정도만 관리하기 때문에 금융권 컴플라이언스에 대응하기 위한 공통기능 정의가 필요하긴 할 듯 하다.


### 현재 계정계포털(Legacy)

계정계포털에 컴플라이언스 때려넣은다음에 다른 업무는 여기를 참고
IM을 활용하여 개별 업무에 로그인 담당(SSO)
현재 계정계포털은 계정계 카드계가 쓰는중
문제는 계정계포털 화면은 하난데 카드계는 카드서버(시스템)가 따로있음
  - 계정계 시스템은 계정계포털 잘 쓸 수 있는데(계정계시스템 - 계정계포털 연동)
  - 카드서비스가 계정계 공통기능을 못씀(결재기능 따로있음)
현재는 화면권한 - 사용자번호 기준으로만 권한이 부여되어있어서(조회/처리 권한 구분없음) CRDap 에서 책임자결재 따로 구현되어있음(계정계 공통 기능을 사용하는것이 아닌 카드 서버의 서비스 호출 시 백엔드에서 책임자결재 기능 수행)
공통기능(front)을 통합해서 구현할 수 있게 만드는 것이 숙제

그리고 계정계/카드계가 아닌 다른 단위업무(방카,간편결제,정보보호 등등)들은 각각의 관리자화면이 따로있어서 컴플라이언스를 개별로 대응해야하는 문제가 현재 있음
앱 리뉴얼 추진 TF가 떴을 때 프론트 스펙과 관리자 스펙을 같이 통일시키거나 업무를 정의해주면 컴플라이언스 대응에 따른 비용을 낮출 수 있지 않을까 하는 바람이 있지만 TF는 고려대상이 아니라고 함

그러므로 생활시세(계정계포털 사용중),캐시우드(계정계포털 사용중 + 책임자결재 필수로 필요), 부동산(관리자화면이 현재는 없지만 있으면 좋음)


### 개인적인 의견

현재 MSA 마이그레이션을 할 때 관리자화면이 계정계포털쪽 websquare를 바라보게 한다면 계정계포털 → MCI → 대외 → VPC → ALB → EKS → 서비스 등등 해서 pod로 온다
  - MCI를 거치면 post fixedLength → get/post json으로 변환하는걸 api-gateway에서 해줘야함
가능하다면 행내에 포털을 만들지 말고 혁신서비스는 pod에서 MVC 만들면 좋을듯

백엔드는 비즈니스만 구현해놓고 프론트 공통 서버에서 공통기능 정의하고 접근,결재 기능을 제공하면 각 단위업무(계정,카드,방카,간편,혁신 등)에서 제공하는 uri 기준으로 사용자가 call 할 수 있는지 없는지를 결정하고 pod를 콜해줘
  - 다만 이 역할을 앱리뉴얼 tf에서 해줬으면 좋겠다고 하셨지만 내년까지 결과물은 없을 예정
⇒ 논의 끝에 관리자 화면이 필요한 환율, 방송, 퀴즈 서비스들은 계정계포털에 관리자 화면을 만들고 CRUD 기능은 MSA 에다가 붙인 구조가 됨. 좋긴 하지만 MCI 구간에 또 계정계포털 매핑해줘야하는게 있음..

기본적인 mvc는 그냥 람다 및 SERVERLESS로 구현하면 좋을 것 같다
  - 단위업무별로 단순한 CRUD 기능 있는 관리자화면이 많아서 이부분은 굳이 무겁게 Spring으로 띄워야하나라는 생각이 들어서 그냥 람다로 적당히 구현하는게 좋지않을까
문제점 - Lambda는 VPC 밖에 있는 AWS 서비스이므로 보안관련 문제가 있음
  - 아니 이게 무슨소린가 하니
  - 아무리 Lambda나 EKS ECR이 VPC를 통해 in out에 제약이 있어도 시스템이 AWS에 있으면 무조건 public으로 본다(정보보호)
  - EKS ECR은 그걸 허가를 받은거고.. Lambda를 위해서 또 같은 길을 걸어야한다(…)
일단은 그냥 단위업무당 관리자 컨테이너 하나 띄우는걸로


### 템플릿

Websquare의 가장 큰 단점은 레퍼런스 부족한 자체 기능 + 빈약한 기능인데 React 기반의 컴포넌트를 가져와가지고 개발할 수 있는걸 한번 POC 해봐야함
